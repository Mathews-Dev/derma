<div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
    <!-- COLUMNA IZQUIERDA: TU TURNO -->
    <div>
        <h3 class="text-xl font-light text-black mb-4 tracking-tight">Tu Turno</h3>
        <hr class="border-gray-100 mb-6">

        <div class="space-y-6">
            <div class="flex items-start gap-4">
                <div
                    class="size-14 rounded-full bg-gray-50 flex items-center justify-center shrink-0 overflow-hidden border border-gray-100">
                    @if (profesional.fotoPerfil) {
                    <img [src]="profesional.fotoPerfil" class="size-full object-cover">
                    } @else {
                    <span class="text-base font-light text-gray-400">
                        {{ profesional.nombre[0] }}{{ profesional.apellido[0] }}
                    </span>
                    }
                </div>
                <div class="space-y-0.5 pt-1">
                    <h4 class="text-lg font-normal text-black leading-tight">
                        {{ profesional.nombre }} {{ profesional.apellido }}
                    </h4>
                    <p class="text-xs text-gray-500 font-light">{{ profesional.tituloProfesional }}</p>
                    <p class="text-[10px] uppercase tracking-widest text-gray-400 mt-1">M.N. {{
                        profesional.numeroMatriculaNacional }}</p>
                </div>
            </div>

            <div class="flex gap-4">
                <div class="px-4 py-3 rounded-xl bg-gray-50 flex-1">
                    <p class="text-[10px] uppercase tracking-widest text-gray-400 mb-1">Fecha</p>
                    <p class="text-sm font-medium text-gray-900 capitalize leading-none">
                        {{ fecha | date:'EEEE d MMMM':'':'es' }}
                    </p>
                </div>
                <div class="px-4 py-3 rounded-xl bg-gray-50 flex-1">
                    <p class="text-[10px] uppercase tracking-widest text-gray-400 mb-1">Hora</p>
                    <p class="text-sm font-medium text-gray-900 leading-none">{{ hora }} hs</p>
                </div>
            </div>

            <div class="flex gap-3 items-start p-3 rounded-lg border border-dashed border-gray-200">
                <svg class="size-4 mt-0.5 shrink-0 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <p class="text-[11px] text-gray-500 font-light leading-relaxed">
                    Recuerda llegar 10 minutos antes. Cancelaciones con 24hs de anticipación.
                </p>
            </div>
        </div>
    </div>

    <!-- COLUMNA DERECHA: TUS DATOS -->
    <div>
        <h3 class="text-xl font-light text-black mb-4 tracking-tight">Tus Datos</h3>
        <hr class="border-gray-100 mb-6">

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5">

            <!-- Celular -->
            <div class="space-y-1.5">
                <label for="telefono" class="text-[10px] uppercase tracking-widest text-gray-500 font-bold ml-1">
                    Celular
                </label>
                <div class="relative flex rounded-lg shadow-sm group h-[40px]">
                    <div class="relative h-full">
                        <button type="button" (click)="toggleDropdown()"
                            class="inline-flex items-center gap-x-2 px-3 h-full bg-white text-gray-700 rounded-l-lg hover:bg-gray-50 focus:z-10 focus:ring-1 focus:ring-black transition-all border border-gray-200 border-r-0">
                            <img [src]="selectedCountry().flagUrl" [alt]="selectedCountry().name"
                                class="w-4 h-auto object-cover rounded-[2px] opacity-90">
                            <span class="text-xs font-medium">{{ selectedCountry().dialCode }}</span>
                            <svg class="size-2.5 text-gray-400 group-hover:text-gray-600 ml-0.5"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M6 9l6 6 6-6" />
                            </svg>
                        </button>

                        @if (isDropdownOpen()) {
                        <div
                            class="absolute z-50 mt-1 w-[200px] max-h-[220px] overflow-y-auto bg-white rounded-xl shadow-lg border border-gray-100 p-1 space-y-0.5 animate-in fade-in zoom-in-95 duration-200">
                            @for (country of countries; track country.code) {
                            <button type="button" (click)="selectCountry(country)"
                                class="w-full flex items-center gap-x-3 py-2 px-2 rounded-lg text-xs text-gray-700 hover:bg-gray-50 transition-all">
                                <img [src]="country.flagUrl" [alt]="country.name"
                                    class="w-4 h-auto object-cover rounded-[2px]">
                                <span class="flex-1 text-left truncate">{{ country.name }}</span>
                                <span class="text-gray-400">{{ country.dialCode }}</span>
                            </button>
                            }
                        </div>
                        }
                    </div>

                    <div class="relative w-full h-full">
                        <input id="telefono" type="tel"
                            class="w-full h-full bg-white border border-gray-200 rounded-r-lg focus:border-black focus:ring-1 focus:ring-black px-3 text-sm font-light text-gray-900 placeholder-gray-300 transition-all"
                            placeholder="11 1234 5678" formControlName="telefonoNotificaciones">
                    </div>
                </div>
                @if (isFieldInvalid('telefonoNotificaciones')) {
                <p class="text-[10px] text-red-500 font-medium ml-1">Campo requerido</p>
                }
            </div>

            <!-- Motivo -->
            <div class="space-y-1.5">
                <label for="motivo" class="text-[10px] uppercase tracking-widest text-gray-500 font-bold ml-1">
                    Motivo (Opcional)
                </label>
                <textarea id="motivo" formControlName="motivo" rows="2"
                    class="w-full rounded-lg border border-gray-200 bg-white text-xs font-light focus:border-black focus:ring-1 focus:ring-black placeholder:text-gray-300 resize-none p-3"
                    placeholder="Breve descripción..."></textarea>
            </div>

            <!-- Botón Submit -->
            <div class="pt-2">
                <button type="submit" [disabled]="isSubmitting || form.invalid"
                    class="w-full h-[42px] rounded-lg bg-black text-white text-xs uppercase tracking-widest font-bold hover:bg-gray-900 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all duration-300 flex items-center justify-center gap-2">
                    @if (isSubmitting) {
                    <div class="size-3.5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                    <span>Procesando</span>
                    } @else {
                    <span>Confirmar Reserva</span>
                    }
                </button>
            </div>

        </form>
    </div>
</div>