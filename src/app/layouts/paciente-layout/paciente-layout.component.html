<!-- Wrapper Principal -->
<div class="min-h-screen w-full bg-[#FAFAFA] font-sans selection:bg-black selection:text-white">

    <!-- 1. FONDO ATMOSFÉRICO (Fijo) -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <div class="absolute inset-0 opacity-[0.03] bg-[url('https://grainy-linears.vercel.app/noise.svg')]"></div>
        <div
            class="absolute top-0 left-0 w-[500px] h-[500px] bg-gray-200/40 rounded-full blur-[120px] mix-blend-multiply">
        </div>
    </div>

    <!-- 2. HEADER MÓVIL (Solo visible en pantallas pequeñas) -->
    <!-- Este header contiene el botón para abrir el sidebar usando Preline -->
    <div
        class="sticky top-0 z-40 flex items-center gap-x-6 bg-white/80 backdrop-blur-md border-b border-gray-200 px-4 py-3 md:hidden">
        <button type="button" class="text-gray-500 hover:text-gray-700" data-hs-overlay="#application-sidebar"
            aria-controls="application-sidebar" aria-label="Toggle navigation">
            <span class="sr-only">Abrir menú</span>
            <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
        </button>

        <!-- Logo versión móvil -->
        <div class="flex items-center gap-2">
            <div class="size-6 bg-black rounded-lg flex items-center justify-center text-white">
                <svg class="size-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                </svg>
            </div>
            <span class="text-sm font-bold uppercase tracking-widest text-black">Portal Paciente</span>
        </div>
    </div>

    <!-- 3. SIDEBAR (Preline Overlay) -->
    <!-- 
         - 'hs-overlay': Activa la lógica de Preline.
         - '-translate-x-full': Oculto por defecto en móvil.
         - 'md:translate-x-0': Siempre visible en desktop.
         - 'fixed inset-y-0 start-0': Posición fija a la izquierda.
    -->
    <aside id="application-sidebar"
        class="hs-overlay hs-overlay-open:translate-x-0 -translate-x-full transition-all duration-300 transform fixed inset-y-0 start-0 z-[60] w-[280px] bg-white/90 backdrop-blur-xl border-r border-gray-100 shadow-[20px_0_40px_-30px_rgba(0,0,0,0.02)] md:block md:translate-x-0 md:end-auto md:bottom-0">

        <div class="flex flex-col h-full">
            <!-- A. Header del Sidebar -->
            <div class="px-8 pt-8 pb-6 shrink-0">
                <div class="flex items-center gap-3">
                    <div class="size-8 bg-black rounded-xl flex items-center justify-center text-white">
                        <svg class="size-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-sm font-bold text-black tracking-tight leading-none">Portal Paciente</h2>
                        <p class="text-[10px] text-gray-400 font-medium uppercase tracking-wider mt-0.5">Bienestar &
                            Salud</p>
                    </div>
                </div>
            </div>

            <!-- B. Navegación Scrollable -->
            <div class="flex-1 overflow-y-auto px-4 space-y-8 no-scrollbar pb-4">

                <!-- Grupo 1 -->
                <div class="space-y-1">
                    <p class="px-4 text-[9px] font-bold text-gray-400 uppercase tracking-[0.2em] mb-2">General</p>

                    <a routerLink="/paciente" routerLinkActive="bg-gray-50 text-black shadow-sm ring-1 ring-gray-200"
                        [routerLinkActiveOptions]="{exact: true}"
                        class="group flex items-center gap-3 px-4 py-3 rounded-xl text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 hover:text-black hover:bg-white hover:shadow-sm transition-all duration-300">
                        <svg class="size-4 text-gray-400 group-hover:text-black group-[.router-link-active]:text-black transition-colors"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" />
                        </svg>
                        Dashboard
                    </a>

                    <a routerLink="/paciente/rutina"
                        routerLinkActive="bg-gray-50 text-black shadow-sm ring-1 ring-gray-200"
                        class="group flex items-center gap-3 px-4 py-3 rounded-xl text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 hover:text-black hover:bg-white hover:shadow-sm transition-all duration-300">
                        <svg class="size-4 text-gray-400 group-hover:text-black group-[.router-link-active]:text-black transition-colors"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 17.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                        </svg>
                        Mi Rutina
                    </a>

                    <a routerLink="/paciente/citas"
                        routerLinkActive="bg-gray-50 text-black shadow-sm ring-1 ring-gray-200"
                        class="group flex items-center gap-3 px-4 py-3 rounded-xl text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 hover:text-black hover:bg-white hover:shadow-sm transition-all duration-300">
                        <svg class="size-4 text-gray-400 group-hover:text-black group-[.router-link-active]:text-black transition-colors"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
                        </svg>
                        Agenda & Citas
                        <span class="ml-auto size-1.5 rounded-full bg-red-500"></span>
                    </a>
                </div>

                <!-- Grupo 2 -->
                <div class="space-y-1">
                    <p class="px-4 text-[9px] font-bold text-gray-400 uppercase tracking-[0.2em] mb-2">Clínico</p>
                    <a routerLink="/paciente/tratamientos"
                        routerLinkActive="bg-gray-50 text-black shadow-sm ring-1 ring-gray-200"
                        class="group flex items-center gap-3 px-4 py-3 rounded-xl text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 hover:text-black hover:bg-white hover:shadow-sm transition-all duration-300">
                        <svg class="size-4 text-gray-400 group-hover:text-black group-[.router-link-active]:text-black transition-colors"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z" />
                        </svg>
                        Tratamientos
                    </a>
                    <a routerLink="/paciente/mi-viaje"
                        routerLinkActive="bg-gray-50 text-black shadow-sm ring-1 ring-gray-200"
                        class="group flex items-center gap-3 px-4 py-3 rounded-xl text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 hover:text-black hover:bg-white hover:shadow-sm transition-all duration-300">
                        <svg class="size-4 text-gray-400 group-hover:text-black group-[.router-link-active]:text-black transition-colors"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
                        </svg>
                        Mi Viaje
                    </a>
                    <a routerLink="/paciente/historial-medico"
                        routerLinkActive="bg-gray-50 text-black shadow-sm ring-1 ring-gray-200"
                        class="group flex items-center gap-3 px-4 py-3 rounded-xl text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 hover:text-black hover:bg-white hover:shadow-sm transition-all duration-300">
                        <svg class="size-4 text-gray-400 group-hover:text-black group-[.router-link-active]:text-black transition-colors"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                        </svg>
                        Historial
                    </a>
                </div>

                <!-- Grupo 3 -->
                <div class="space-y-1">
                    <p class="px-4 text-[9px] font-bold text-gray-400 uppercase tracking-[0.2em] mb-2">Cuenta</p>
                    <a routerLink="/paciente/documentos"
                        routerLinkActive="bg-gray-50 text-black shadow-sm ring-1 ring-gray-200"
                        class="group flex items-center gap-3 px-4 py-3 rounded-xl text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 hover:text-black hover:bg-white hover:shadow-sm transition-all duration-300">
                        <svg class="size-4 text-gray-400 group-hover:text-black group-[.router-link-active]:text-black transition-colors"
                            fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z" />
                        </svg>
                        Legal & Datos
                    </a>
                </div>
            </div>

            <!-- C. Footer del Sidebar -->
            <div class="p-4 border-t border-gray-100 bg-white shrink-0">
                <button
                    class="w-full flex items-center justify-center gap-2 bg-black text-white hover:bg-gray-900 px-4 py-3 rounded-xl transition-all shadow-[0_10px_20px_-10px_rgba(0,0,0,0.3)] hover:shadow-lg group mb-4">
                    <span class="text-[10px] font-bold uppercase tracking-[0.15em]">Nuevo Turno</span>
                    <svg class="size-3.5 group-hover:translate-x-0.5 transition-transform" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                </button>

                <a routerLink="/paciente/perfil"
                    class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer group">
                    <div class="size-8 rounded-full bg-gray-200 overflow-hidden border border-gray-100">
                        <img src="https://ui-avatars.com/api/?name=Usuario+Paciente&background=random" alt="Avatar"
                            class="size-full object-cover">
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-[11px] font-bold text-gray-900 truncate group-hover:text-black">Mi Perfil</p>
                        <p class="text-[9px] text-gray-400 truncate">Configuración</p>
                    </div>
                    <svg class="size-4 text-gray-300 group-hover:text-black transition-colors" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                    </svg>
                </a>
            </div>
        </div>
    </aside>

    <!-- 4. CONTENIDO PRINCIPAL -->
    <!-- 
         - 'md:pl-[280px]': Deja el espacio para el sidebar fijo solo en desktop.
         - 'w-full': Asegura que tome todo el ancho restante.
    -->
    <main class="w-full md:pl-[280px]">

        <div class="w-full min-h-screen relative z-10">
            <router-outlet />
        </div>
    </main>

</div>